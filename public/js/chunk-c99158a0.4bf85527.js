(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c99158a0"],{"3ca3":function(t,e,r){"use strict";var a=r("6547").charAt,o=r("69f3"),s=r("7dd0"),n="String Iterator",i=o.set,c=o.getterFor(n);s(String,"String",(function(t){i(this,{type:n,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=a(r,o),e.index+=t.length,{value:t,done:!1})}))},6547:function(t,e,r){var a=r("a691"),o=r("1d80"),s=function(t){return function(e,r){var s,n,i=String(o(e)),c=a(r),u=i.length;return c<0||c>=u?t?"":void 0:(s=i.charCodeAt(c),s<55296||s>56319||c+1===u||(n=i.charCodeAt(c+1))<56320||n>57343?t?i.charAt(c):s:t?i.slice(c,c+2):n-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},"91e4":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentWrapper",{attrs:{id:"AdminLogin"}},[r("section",{staticClass:"container my-lg-5"},[r("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.DoLogin(e)}}},[r("div",{staticClass:"mb-4"},[r("img",{staticClass:"mb-4 mx-auto d-block",attrs:{src:t.$store.state.profile.logo,alt:t.$store.state.profile.website.Title[t.$store.state.language]}}),r("h1",{staticClass:"text-center h3 mb-3 font-weight-bold"},[t._v(t._s(t.$t("Manage.ManageLogin")))]),r("b-alert",{staticClass:"shadow",attrs:{show:t.Error,variant:t.Variant,fade:"",dismissible:""},on:{dismissed:function(e){t.Error=!1}}},[t._v(" "+t._s(t.ErrorMessage)+" ")])],1),r("div",{staticClass:"form-label-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.Account,expression:"Account"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:t.$t("Manage.Account"),required:"",autofocus:""},domProps:{value:t.Account},on:{input:function(e){e.target.composing||(t.Account=e.target.value)}}}),r("label",{attrs:{for:"inputEmail"}},[t._v(t._s(t.$t("Manage.Account")))])]),r("div",{staticClass:"form-label-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.Password,expression:"Password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:t.$t("Manage.Password"),required:""},domProps:{value:t.Password},on:{input:function(e){e.target.composing||(t.Password=e.target.value)}}}),r("label",{attrs:{for:"inputPassword"}},[t._v(t._s(t.$t("Manage.Password")))])]),r("div",{staticClass:"checkbox mb-3"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.RememberMe,expression:"RememberMe"}],attrs:{type:"checkbox",value:"remember-me"},domProps:{checked:Array.isArray(t.RememberMe)?t._i(t.RememberMe,"remember-me")>-1:t.RememberMe},on:{change:function(e){var r=t.RememberMe,a=e.target,o=!!a.checked;if(Array.isArray(r)){var s="remember-me",n=t._i(r,s);a.checked?n<0&&(t.RememberMe=r.concat([s])):n>-1&&(t.RememberMe=r.slice(0,n).concat(r.slice(n+1)))}else t.RememberMe=o}}}),t._v(" "+t._s(t.$t("Manage.Remember"))+" ")])]),r("button",{staticClass:"btn btn-lg btn-dark btn-block shadow",attrs:{type:"submit"}},[t._v(t._s(t.$t("Manage.Login")))]),r("p",{staticClass:"mt-5 mb-3 text-muted text-center"},[t._v("Copyright Â© "+t._s(t.$store.state.profile.website.Year)+" "+t._s(t.$store.state.profile.website.Title[t.$store.state.language]))])])])])},o=[],s=(r("d3b7"),r("3ca3"),r("ddb0"),r("4360"),{name:"AdminLogin",data:function(){return{Account:"",Password:"",RememberMe:!0,Error:!1,ErrorMessage:"",Variant:"danger"}},computed:{},mounted:function(){var t=this;this.$root.$Progress.start(),Promise.all(this.Init()).then((function(){t.$root.$Progress.finish()})).catch((function(e){alert(e),t.$root.$Progress.fail(),t.$router.push("/error")}))},methods:{Init:function(){var t=this;return[new Promise((function(e){return t.CheckAuth(e)}))]},DoLogin:function(){var t=this;this.$root.$Progress.start(),this.$store.state.auth.signInWithEmailAndPassword(this.Account,this.Password).then((function(e){t.WriteLoginRecord(e).then((function(e){t.$root.$Progress.finish(),t.$router.push("/manage/dashboard")})).catch((function(e){t.$root.$Progress.fail(),t.Error=!0,t.Variant="danger",t.ErrorMessage=t.$t("Message.Manage.auth/unexpected-error")}))})).catch((function(e){t.$root.$Progress.fail(),t.Error=!0,t.Variant="danger",t.ErrorMessage=t.$t("Message.Manage."+e.code)}))},WriteLoginRecord:function(t){var e=this;return new Promise((function(r,a){e.$store.state.database.collection("LoginRecord").add({Account:e.Account,Uid:t.user.uid,LoginTime:t.user.metadata.b}).then((function(t){r()})).catch((function(t){a(t)}))}))},CheckAuth:function(t){var e=this;this.$store.dispatch("CheckAuth").then((function(r){e.$router.push("/manage/dashboard"),t()})).catch((function(r){e.$route.query.redirect&&(e.Error=!0,e.Variant="info",e.ErrorMessage=e.$t("Message.Manage.auth/expired")),t()}))}}}),n=s,i=r("2877"),c=Object(i["a"])(n,a,o,!1,null,null,null);e["default"]=c.exports},ddb0:function(t,e,r){var a=r("da84"),o=r("fdbc"),s=r("e260"),n=r("9112"),i=r("b622"),c=i("iterator"),u=i("toStringTag"),d=s.values;for(var l in o){var m=a[l],g=m&&m.prototype;if(g){if(g[c]!==d)try{n(g,c,d)}catch(f){g[c]=d}if(g[u]||n(g,u,l),o[l])for(var h in s)if(g[h]!==s[h])try{n(g,h,s[h])}catch(f){g[h]=s[h]}}}}}]);
//# sourceMappingURL=chunk-c99158a0.4bf85527.js.map